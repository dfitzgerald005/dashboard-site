<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RRG Healthcare Revenue Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .dashboard {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 30px;
        }

        .header h1 {
            color: #1e3c72;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .stat-card .icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .stat-card.blue .icon { background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%); }
        .stat-card.green .icon { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); }
        .stat-card.orange .icon { background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%); }
        .stat-card.purple .icon { background: linear-gradient(135deg, #7f00ff 0%, #e100ff 100%); }

        .stat-card h3 {
            color: #888;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .stat-card .change {
            font-size: 0.9em;
            color: #11998e;
        }

        .stat-card .change.negative {
            color: #ee0979;
        }

        .stat-card .change.neutral {
            color: #666;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-card h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .chart-container {
            position: relative;
            height: 350px;
        }

        .chart-container.tall {
            height: 500px;
        }

        .data-table {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            overflow-x: auto;
        }

        .data-table h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th {
            background: #f8f9fa;
            color: #1e3c72;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85em;
            letter-spacing: 1px;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .rank {
            font-weight: bold;
            color: #1e3c72;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>RRG Healthcare Revenue Dashboard</h1>
            <p>Substance Abuse & Mental Health PHP/IOP Services - YTD 2025</p>
        </div>

        <div class="stats-grid">
            <div class="stat-card blue">
                <div class="icon">üí∞</div>
                <h3>Total Collected (YTD)</h3>
                <div class="value">$19.7M</div>
                <div class="change neutral">63,413 paid claims</div>
            </div>

            <div class="stat-card green">
                <div class="icon">üìä</div>
                <h3>Total Revenue (Accrual)</h3>
                <div class="value">$24.7M</div>
                <div class="change">$5.1M forecasted from unpaid claims</div>
            </div>

            <div class="stat-card purple">
                <div class="icon">üìà</div>
                <h3>Collection Rate</h3>
                <div class="value">20.83%</div>
                <div class="change neutral">Of total billed ($94.5M)</div>
            </div>

            <div class="stat-card orange">
                <div class="icon">üè•</div>
                <h3>December Forecast</h3>
                <div class="value">$1.6M</div>
                <div class="change">$1.4M expected payments</div>
            </div>
        </div>

        <div class="stat-card orange" style="grid-column: 1 / -1; background: linear-gradient(135deg, #fff5f5 0%, #ffe5e5 100%); border-left: 5px solid #ee0979;">
            <h3 style="color: #ee0979; font-size: 1.1em; margin-bottom: 15px;">‚ö†Ô∏è CONCENTRATION RISK ALERT</h3>
            <div style="color: #333; font-size: 1em; line-height: 1.6;">
                <strong>Harvard Pilgrim Health Care</strong> represents <strong>44% ($2.2M)</strong> of forecasted revenue but <strong>stopped paying in September 2025</strong>.
                Outstanding balance: <strong>$1.2M</strong> across 2,599 unpaid claims. Critical cash flow risk requiring immediate action.
            </div>
        </div>

        <div class="charts-grid">
            <div class="chart-card">
                <h2>PHP vs IOP Revenue</h2>
                <div class="chart-container">
                    <canvas id="serviceTypeChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h2>December 2025 Revenue Status</h2>
                <div class="chart-container">
                    <canvas id="decemberChart"></canvas>
                </div>
            </div>

            <div class="chart-card full-width">
                <h2>Revenue by Location - Month over Month (2025)</h2>
                <div class="chart-container tall">
                    <canvas id="locationMonthlyChart"></canvas>
                </div>
            </div>

            <div class="chart-card full-width">
                <h2>Top 15 Payers by Total Revenue (YTD 2025)</h2>
                <div class="chart-container tall">
                    <canvas id="payerRevenueChart"></canvas>
                </div>
            </div>

            <div class="chart-card full-width">
                <h2>Top 10 Payers by Average Reimbursement Per Claim</h2>
                <div class="chart-container">
                    <canvas id="avgReimbursementChart"></canvas>
                </div>
            </div>
        </div>

        <div class="data-table">
            <h2>Top 20 Payers by Total Revenue</h2>
            <table>
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Payer Name</th>
                        <th>Total Revenue</th>
                        <th>Paid Claims</th>
                        <th>Avg per Claim</th>
                        <th>% of Total</th>
                    </tr>
                </thead>
                <tbody id="payerTable">
                    <!-- Populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Data from analysis
        const payerData = [
            {payer: "HARVARD PILGRIM HEALTH CARE", total: 2052432.44, claims: 1828, percent: 10.43},
            {payer: "MASSACHUSETTS BLUE CROSS BLUE SHIELD", total: 1603404.30, claims: 1584, percent: 8.15},
            {payer: "AETNA", total: 1296452.83, claims: 1009, percent: 6.59},
            {payer: "BCBS MA - MA", total: 1113396.25, claims: 2037, percent: 5.66},
            {payer: "AETNA HEALTH PLANS", total: 900700.46, claims: 551, percent: 4.58},
            {payer: "UNITED HEALTHCARE", total: 869554.53, claims: 1877, percent: 4.42},
            {payer: "BLUE CROSS - MASSACHUSETTS", total: 684535.50, claims: 1285, percent: 3.48},
            {payer: "ALLWAYS HEALTH PARTNERS", total: 556853.01, claims: 893, percent: 2.83},
            {payer: "BLUE CROSS - ILLINOIS", total: 462169.46, claims: 407, percent: 2.35},
            {payer: "CIGNA", total: 449533.72, claims: 1215, percent: 2.28},
            {payer: "CIGNA HEALTH PLANS", total: 437022.08, claims: 1029, percent: 2.22},
            {payer: "MASS GEN BRIGHAM - OPTUM", total: 426105.11, claims: 200, percent: 2.17},
            {payer: "HEALTH PLANS INC.", total: 424894.91, claims: 704, percent: 2.16},
            {payer: "BLUE CROSS - RHODE ISLAND", total: 343940.35, claims: 364, percent: 1.75},
            {payer: "EMPIRE BCBS NY-MASSACHUSETTS", total: 318622.40, claims: 156, percent: 1.62},
            {payer: "BLUE CROSS - NEW JERSEY", total: 315179.09, claims: 165, percent: 1.60},
            {payer: "WELLMARK BCBS - MA", total: 298686.62, claims: 110, percent: 1.52},
            {payer: "HMC HEALTHWORKS", total: 295227.25, claims: 599, percent: 1.50},
            {payer: "BCBS HORIZON OF NEW JERSEY-MA", total: 293836.31, claims: 182, percent: 1.49},
            {payer: "BCBS RHODE ISLAND-MASS.", total: 291283.74, claims: 494, percent: 1.48}
        ];

        const topAvgPayers = [
            {payer: "MERITAIN HEALTH", avg: 10190.93, claims: 4},
            {payer: "CAREFIRST BCBS-MA", avg: 3368.62, claims: 38},
            {payer: "CARELON BEHAVIORAL", avg: 3000.00, claims: 5},
            {payer: "CARELON (BEACON)", avg: 2999.62, claims: 96},
            {payer: "BCBS TEXAS - MA", avg: 2935.52, claims: 45},
            {payer: "BCBS ID - MA", avg: 2753.81, claims: 26},
            {payer: "WELLMARK BCBS - MA", avg: 2715.33, claims: 110},
            {payer: "BLUE CROSS - FLORIDA", avg: 2509.26, claims: 46},
            {payer: "BLUE CROSS - IOWA", avg: 2432.72, claims: 46},
            {payer: "EXCELLUS BCBS - MA", avg: 2401.45, claims: 56}
        ];

        // Service Type Chart
        const serviceCtx = document.getElementById('serviceTypeChart').getContext('2d');
        new Chart(serviceCtx, {
            type: 'doughnut',
            data: {
                labels: ['PHP (Partial Hospitalization)', 'IOP (Intensive Outpatient)', 'Other Services'],
                datasets: [{
                    data: [7525893.30, 5584300.31, 6567254.72],
                    backgroundColor: ['#1e3c72', '#11998e', '#7f00ff']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const value = context.parsed;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percent = ((value / total) * 100).toFixed(1);
                                return context.label + ': $' + value.toLocaleString('en-US', {maximumFractionDigits: 0}) + ' (' + percent + '%)';
                            }
                        }
                    }
                }
            }
        });

        // December Chart
        const decCtx = document.getElementById('decemberChart').getContext('2d');
        new Chart(decCtx, {
            type: 'bar',
            data: {
                labels: ['Billed', 'Collected', 'Forecasted', 'Expected'],
                datasets: [{
                    label: 'December 2025',
                    data: [7625450, 253564.45, 1648939.67, 1395375.22],
                    backgroundColor: ['#7f00ff', '#11998e', '#1e3c72', '#ee0979']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return '$' + (value / 1000000).toFixed(1) + 'M';
                            }
                        }
                    }
                }
            }
        });

        // Top Payers by Revenue Chart
        const payerRevCtx = document.getElementById('payerRevenueChart').getContext('2d');
        new Chart(payerRevCtx, {
            type: 'bar',
            data: {
                labels: payerData.slice(0, 15).map(p => p.payer.length > 30 ? p.payer.substring(0, 30) + '...' : p.payer),
                datasets: [{
                    label: 'Total Revenue',
                    data: payerData.slice(0, 15).map(p => p.total),
                    backgroundColor: '#1e3c72'
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return '$' + context.parsed.x.toLocaleString('en-US', {maximumFractionDigits: 0});
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return '$' + (value / 1000000).toFixed(1) + 'M';
                            }
                        }
                    }
                }
            }
        });

        // Location Monthly Revenue Chart
        const locationData = [
            {month: "Jan", MCA: 88909.40, RRBH: 152243.34, RRTC: 233575.65},
            {month: "Feb", MCA: 237889.45, RRBH: 335562.21, RRTC: 756800.98},
            {month: "Mar", MCA: 258517.09, RRBH: 532093.84, RRTC: 725180.76},
            {month: "Apr", MCA: 304328.71, RRBH: 369618.32, RRTC: 1109684.18},
            {month: "May", MCA: 302746.81, RRBH: 334400.01, RRTC: 1073081.47},
            {month: "Jun", MCA: 184074.33, RRBH: 453246.21, RRTC: 1377638.29},
            {month: "Jul", MCA: 186826.18, RRBH: 867028.55, RRTC: 1026883.89},
            {month: "Aug", MCA: 334036.89, RRBH: 703728.71, RRTC: 849221.21},
            {month: "Sep", MCA: 316631.51, RRBH: 596984.49, RRTC: 693147.14},
            {month: "Oct", MCA: 279742.87, RRBH: 337538.24, RRTC: 1031037.47},
            {month: "Nov", MCA: 323014.51, RRBH: 254688.44, RRTC: 711610.07},
            {month: "Dec", MCA: 689214.79, RRBH: 632406.47, RRTC: 850312.00}
        ];

        const locationCtx = document.getElementById('locationMonthlyChart').getContext('2d');
        new Chart(locationCtx, {
            type: 'line',
            data: {
                labels: locationData.map(d => d.month),
                datasets: [
                    {
                        label: 'RRTC (Substance Abuse)',
                        data: locationData.map(d => d.RRTC),
                        borderColor: '#1e3c72',
                        backgroundColor: 'rgba(30, 60, 114, 0.1)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 3
                    },
                    {
                        label: 'RRBH (Mental Health)',
                        data: locationData.map(d => d.RRBH),
                        borderColor: '#11998e',
                        backgroundColor: 'rgba(17, 153, 142, 0.1)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 3
                    },
                    {
                        label: 'MCA (In-Network)',
                        data: locationData.map(d => d.MCA),
                        borderColor: '#ee0979',
                        backgroundColor: 'rgba(238, 9, 121, 0.1)',
                        tension: 0.4,
                        fill: true,
                        borderWidth: 3
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': $' + context.parsed.y.toLocaleString('en-US', {maximumFractionDigits: 0});
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        stacked: false,
                        ticks: {
                            callback: function(value) {
                                return '$' + (value / 1000).toFixed(0) + 'K';
                            }
                        }
                    }
                }
            }
        });

        // Average Reimbursement Chart
        const avgCtx = document.getElementById('avgReimbursementChart').getContext('2d');
        new Chart(avgCtx, {
            type: 'bar',
            data: {
                labels: topAvgPayers.map(p => p.payer),
                datasets: [{
                    label: 'Avg Reimbursement per Claim',
                    data: topAvgPayers.map(p => p.avg),
                    backgroundColor: '#11998e'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return '$' + context.parsed.y.toLocaleString('en-US', {maximumFractionDigits: 2}) + ' per claim';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return '$' + value.toLocaleString();
                            }
                        }
                    }
                }
            }
        });

        // Populate payer table
        const tableBody = document.getElementById('payerTable');
        payerData.forEach((payer, index) => {
            const row = document.createElement('tr');
            const avgPerClaim = (payer.total / payer.claims).toFixed(2);
            row.innerHTML = `
                <td class="rank">#${index + 1}</td>
                <td><strong>${payer.payer}</strong></td>
                <td>$${payer.total.toLocaleString('en-US', {maximumFractionDigits: 2})}</td>
                <td>${payer.claims.toLocaleString()}</td>
                <td>$${parseFloat(avgPerClaim).toLocaleString('en-US', {maximumFractionDigits: 2})}</td>
                <td>${payer.percent}%</td>
            `;
            tableBody.appendChild(row);
        });
    </script>
</body>
</html>